<section class="content">
  <div class="content-block">
    <div class="block-header" *ngFor="let breadscrum of breadscrums">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="breadscrum.title" [items]="breadscrum.items" [active_item]="breadscrum.active">
      </app-breadcrumb>
    </div>
    <div class="row clearfix">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
        <div class="card">
          <div class="header">
            <!-- <h2>Create Course</h2> -->

          </div>

          <mat-horizontal-stepper linear labelPosition="bottom" #stepper>
            <mat-step [stepControl]="firstFormGroup" completed="false">
              <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>{{ editUrl ? 'Edit Course' : 'Course Create'}}</ng-template>
                <div class="body" >
                  <!-- <form class="m-4" [formGroup]="firstFormGroup" (ngSubmit)="onSubmit()"> -->
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Course Name <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <!-- <mat-label>Course Name</mat-label> -->
                          
                          <input matInput formControlName="title" placeholder="Enter Course Name" required>
                          <mat-error *ngIf="isSubmitted"
                          [class.invalid-text]="isSubmitted && firstFormGroup.get('title')?.invalid || firstFormGroup.get('title')?.invalid && firstFormGroup.get('title')?.touched">
                            Course name is required
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Course Code <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="courseCode"  placeholder="Enter Course Code" required>
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('courseCode')?.invalid || firstFormGroup.get('courseCode')?.invalid && firstFormGroup.get('sub_category')?.touched">
                      </mat-error>
                      </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                          <label>Main Category <span class="mandatory">&nbsp;*</span></label>
                          <mat-form-field class="example-full-width mb-3" appearance="outline">
                            <mat-select formControlName="main_category" required (selectionChange)="mainCategoryChange()" >
                              <mat-option *ngFor="let item of mainCategories" [value]="item.id">
                                {{item.category_name}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <mat-error *ngIf="isSubmitted"
                          [class.invalid-text]="isSubmitted && firstFormGroup.get('main_category')?.invalid || firstFormGroup.get('main_category')?.invalid && firstFormGroup.get('main_category')?.touched">
                            Select any category
                          </mat-error>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Sub Category <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="sub_category" required>
                            <mat-option *ngFor="let item of subCategories" [value]="item.id">
                              {{item.category_name}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('sub_category')?.invalid || firstFormGroup.get('sub_category')?.invalid && firstFormGroup.get('sub_category')?.touched">
                          Select any category
                        </mat-error>
                    </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 mb-2">
                        <label>Days</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="course_duration_in_days"  placeholder="Enter Days">
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('course_duration_in_days')?.invalid || firstFormGroup.get('course_duration_in_days')?.invalid && firstFormGroup.get('course_duration_in_days')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 mb-2">
                        <label>Training Hours</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="training_hours" placeholder="Enter Training Days">
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('training_hours')?.invalid || firstFormGroup.get('training_hours')?.invalid && firstFormGroup.get('training_hours')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 mb-2">
                        <label>Fees</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="fee" placeholder="Enter Fees">
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('fee')?.invalid || firstFormGroup.get('fee')?.invalid && firstFormGroup.get('fee')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 mb-2">
                        <label>Currency</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="currency_code">
                            <mat-option value="USD">USD</mat-option>
                            <mat-option value="SGD">SGD</mat-option>
                            <mat-option value="NZD">NZD</mat-option>
                            <mat-option value="YEN">YEN</mat-option>
                            <mat-option value="GBP">GBP</mat-option>
                            <mat-option value="KWN">KWN</mat-option>
                            <mat-option value="IDR">IDR</mat-option>
                            <mat-option value="TWD">TWD</mat-option>
                            <mat-option value="MYR">MYR</mat-option>
                            <mat-option value="AUD">AUD</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Skill Connect Code</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="skill_connect_code" placeholder="Enter Skill Connect Code">
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('skill_connect_code')?.invalid || firstFormGroup.get('skill_connect_code')?.invalid && firstFormGroup.get('skill_connect_code')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Description</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="course_description" placeholder="Enter Description">
                        </mat-form-field>
                        <mat-error *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('course_description')?.invalid || firstFormGroup.get('course_description')?.invalid && firstFormGroup.get('course_description')?.touched">
                        </mat-error>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                        <label>Course Detailed Description</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="course_detailed_description">
                        </mat-form-field>
                        <mat-error  *ngIf="isSubmitted"
                        [class.invalid-text]="isSubmitted && firstFormGroup.get('course_detailed_description')?.invalid || firstFormGroup.get('course_detailed_description')?.invalid && firstFormGroup.get('course_detailed_description')?.touched">
                        </mat-error>
                      </div>
        
                    </div>
                  <!-- </form> -->
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <button mat-button matStepperPrevious id="back" [routerLink]="['/admin/courses/all-courses']">Back</button>
                  </div>
                  <div class="col-md-2">
                    <button mat-button matStepperNext id="next" class="disableNext" 
                    [disabled]="firstFormGroup.get('title')?.invalid || firstFormGroup.get('courseCode')?.invalid || firstFormGroup.get('main_category')?.invalid || firstFormGroup.get('sub_category')?.invalid">Next</button>
                    <!-- [disabled]="firstFormGroup.invalid" -->
                  </div>
                </div>
                
               
                <!-- </div> -->
              </form>
            </mat-step>
            <mat-step [stepControl]="secondFormGroup">
              <form [formGroup]="secondFormGroup">
                <ng-template  matStepLabel >WBS Code</ng-template>
                <div class="body">
                  <!-- <form class="m-4" [formGroup]="secondFormGroup" (ngSubmit)="onSubmit()"> -->
                    <div class="row">
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <label>PDU Technical</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="pdu_technical">
                        </mat-form-field>
                        <mat-error *ngIf="isWbsSubmitted"
                        [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('pdu_technical')?.invalid || secondFormGroup.get('pdu_technical')?.invalid && secondFormGroup.get('pdu_technical')?.touched">
                      </mat-error>
                      </div>
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <label>PDU Leadership</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="pdu_leadership">
                        </mat-form-field>
                        <mat-error  *ngIf="isWbsSubmitted"
                        [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('pdu_leadership')?.invalid || secondFormGroup.get('pdu_leadership')?.invalid && secondFormGroup.get('pdu_leadership')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 mb-2">
                        <label>PDU Startegic</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="pdu_strategic">
                        </mat-form-field>
                        <mat-error *ngIf="isWbsSubmitted"
                        [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('pdu_strategic')?.invalid || secondFormGroup.get('pdu_strategic')?.invalid && secondFormGroup.get('pdu_strategic')?.touched">
                        </mat-error>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-5">
                        <label>Thumbnail</label>
                        <app-file-upload formControlName="image_link" (change)="onFileUpload($event)"></app-file-upload>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Website Link</label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <input matInput formControlName="website_link" placeholder="www">
                        </mat-form-field>
                        <mat-error *ngIf="isWbsSubmitted"
                        [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('website_link')?.invalid || secondFormGroup.get('website_link')?.invalid && secondFormGroup.get('website_link')?.touched">
                        </mat-error>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Funding/Grant <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="funding_grant" required>
                            <mat-option *ngFor="let item of fundingGrants" [value]="item.id">
                              {{item.grant_type}}
                            </mat-option>
                           
                          </mat-select>
                          <mat-error  *ngIf="isWbsSubmitted"
                          [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('funding_grant')?.invalid || secondFormGroup.get('funding_grant')?.invalid && secondFormGroup.get('funding_grant')?.touched">
                          
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Survey <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="survey" required>
                            <mat-option *ngFor="let item of survey" [value]="item.id">
                              {{item.name}}
                            </mat-option>
                            
                          </mat-select>
                          <mat-error *ngIf="isWbsSubmitted"
                          [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('survey')?.invalid || secondFormGroup.get('survey')?.invalid && secondFormGroup.get('survey')?.touched">
                           
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Assign Instructors <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="course_instructor" required>
                            <mat-option *ngFor="let item of instructors" [value]="item.id">
                              {{item.user_id.name + ' ' + item.user_id.last_name}}
                            </mat-option>
                           
                          </mat-select>
                          <mat-error *ngIf="isWbsSubmitted"
                          [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('course_instructor')?.invalid || secondFormGroup.get('course_instructor')?.invalid && secondFormGroup.get('course_instructor')?.touched">
                            
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Assign Coursekit <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="course_kit" required>
                            <mat-option *ngFor="let item of courseKits" [value]="item.id">
                              {{item.name}}
                            </mat-option>
                           
                          </mat-select>
                          <mat-error *ngIf="isWbsSubmitted"
                           [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('course_kit')?.invalid || secondFormGroup.get('course_kit')?.invalid && secondFormGroup.get('course_kit')?.touched">
                           
                          </mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                        <label>Certificates <span class="mandatory">&nbsp;*</span></label>
                        <mat-form-field class="example-full-width mb-3" appearance="outline">
                          <mat-select formControlName="certificates" required>
                            <mat-option *ngFor="let certificate of certificates" [value]="certificate.id">
                              {{certificate.title}}
                            </mat-option>
                           
                          </mat-select>
                          <mat-error *ngIf="isWbsSubmitted"
                          [class.invalid-text]="isWbsSubmitted && secondFormGroup.get('certificates')?.invalid || secondFormGroup.get('certificates')?.invalid && secondFormGroup.get('certificates')?.touched">
                            
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <button mat-button matStepperPrevious id="back">Back</button>
                  </div>
                  <div class="col-md-2">
                    <button mat-button (click)="submit()" *ngIf="!editUrl" id="next" [attr.data-bs-toggle]="secondFormGroup.valid ? 'modal' : null">Submit</button>
                    <button mat-button *ngIf="editUrl" id="next" [attr.data-bs-toggle]="secondFormGroup.valid ? 'modal' : null"> Save </button>
                  </div>
                </div>
              </form>
            </mat-step>

          </mat-horizontal-stepper>
        </div>
      </div>
    </div>
  </div>
</section>