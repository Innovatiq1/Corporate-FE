<section class="content" *ngIf="isAdmin">
    <div class="content-block">
        <div class="block-header" *ngFor="let breadscrum of breadscrums">
            <!-- breadcrumb -->
            <app-breadcrumb [title]="breadscrum.title" [items]="breadscrum.items" [active_item]="breadscrum.active">
            </app-breadcrumb>
        </div>

        <mat-tab-group>
            <mat-tab>
                <ng-template mat-tab-label>
                    <!-- <mat-icon class="example-tab-icon msr-2">face</mat-icon> -->
                    Users Analytics
                </ng-template>
                <div class="row mt-5">

                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card card-statistic-2">
                            <div class="clearfix">
                                <div class="card-icon-only shadow-primary float-start">
                                    <img src="assets/images/banner/New Students.jpg" alt="" style="margin-left: -21px;">

                                </div>
                                <div class="card-right">
                                    <div>
                                        <h5 class="float-end" style="padding-top: 100px;">Total Staff</h5>
                                    </div>
                                    <div class="col-green">
                                        <h3 class="font-weight-bold float-end mb-0">{{count?.students}}</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="card-content msl-4 mb-3">
                                <p class="m-b-0 d-flex"><i class="material-icons col-green psr-2">trending_up</i> 10%
                                    Higher Then Last
                                    Month
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card card-statistic-2">
                            <div class="clearfix">
                                <div class="card-icon-only shadow-primary float-start">
                                    <img src="assets/images/banner/online-course.png" alt="">
                                </div>
                                <div class="card-right">
                                    <div>
                                        <h5 class="float-end" style="margin-top: 100px;">All Courses</h5>
                                    </div>
                                    <div class="col-green">
                                        <h3 class="font-weight-bold float-end mb-0">{{count?.courses}}</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="card-content msl-4 mb-3">
                                <p class="m-b-0 d-flex"><i class="material-icons col-orange psr-2">trending_down</i> 07%
                                    Less Then Last
                                    Year
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12">
                        <div class="card card-statistic-2">
                            <div class="clearfix">
                                <div class="card-icon-only shadow-primary float-start">
                                    <img src="assets/images/banner/survey.png" alt="">
                                </div>
                                <div class="card-right">
                                    <div>
                                        <h5 class="float-end" style="padding-top: 100px;">All Feedbacks</h5>
                                    </div>
                                    <div class="col-green">
                                        <h3 class="font-weight-bold float-end mb-0">{{feedbackCount}}</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="card-content msl-4 mb-3">
                                <p class="m-b-0 d-flex"><i class="material-icons col-green psr-2">trending_up</i> 05%
                                    Higher Then Last
                                    Month
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- #END# Widgets -->
               
                <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="card" style="border-radius: 31px;">
                            <div class="header mt-3">
                                <h2>
                                    Staff Survey</h2>
                            </div>
                            <div class="body" *ngIf="isArea">
                                <apx-chart [series]="areaChartOptions.series!" [chart]="areaChartOptions.chart!"
                                    [xaxis]="areaChartOptions.xaxis!" [yaxis]="areaChartOptions.yaxis!"
                                    [colors]="areaChartOptions.colors!" [stroke]="areaChartOptions.stroke!"
                                    [legend]="areaChartOptions.legend!" [grid]="areaChartOptions.grid!"
                                    [tooltip]="areaChartOptions.tooltip!"
                                    [dataLabels]="areaChartOptions.dataLabels!"></apx-chart>
                            </div>
                            <div class="body" *ngIf="isSurveyBar">
                                <apx-chart [series]="surveyBarChartOptions.series!"
                                    [chart]="surveyBarChartOptions.chart!" [xaxis]="surveyBarChartOptions.xaxis!"
                                    [yaxis]="surveyBarChartOptions.yaxis!" [colors]="surveyBarChartOptions.colors!"
                                    [stroke]="surveyBarChartOptions.stroke!" [legend]="surveyBarChartOptions.legend!"
                                    [grid]="surveyBarChartOptions.grid!" [tooltip]="surveyBarChartOptions.tooltip!"
                                    [dataLabels]="surveyBarChartOptions.dataLabels!"></apx-chart>
                            </div>
                            <div class="body" *ngIf="isSurveyPie">
                                <apx-chart [series]="surveyPieChartOptions.series!"
                                    [chart]="surveyPieChartOptions.chart!" [labels]="surveyPieChartOptions.labels!"
                                    [legend]="surveyPieChartOptions.legend!" [colors]="surveyPieChartOptions.colors!"
                                    [responsive]="surveyPieChartOptions.responsive!"></apx-chart>
                            </div>

                        </div>
                    </div>

                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="card" style="border-radius: 31px;">
                          <div class="header mt-3">
                            <h2>Staff Performance Chart</h2>
                          </div>
                          <div class="body" *ngIf="isBar">
                            <apx-chart [series]="performanceBarChartOptions.series!" [chart]="performanceBarChartOptions.chart!"
                              [dataLabels]="performanceBarChartOptions.dataLabels!" [labels]="performanceBarChartOptions.labels!"
                              [legend]="performanceBarChartOptions.legend!" [fill]="performanceBarChartOptions.fill!"
                              [responsive]="performanceBarChartOptions.responsive!">
                            </apx-chart>
                          </div>
                          <div class="body" *ngIf="isPie">
                            <apx-chart [series]="pieChart1Options.series!" [chart]="pieChart1Options.chart!"
                              [dataLabels]="pieChart1Options.dataLabels!" [labels]="pieChart1Options.labels!"
                              [legend]="pieChart1Options.legend!" [fill]="pieChart1Options.fill!"
                              [responsive]="pieChart1Options.responsive!">
                            </apx-chart>
                          </div>
                          <div class="body" *ngIf="isLine">
                            <apx-chart [series]="lineChartOptions.series!" [chart]="lineChartOptions.chart!"
                              [dataLabels]="lineChartOptions.dataLabels!" [labels]="lineChartOptions.labels!"
                              [legend]="lineChartOptions.legend!" [fill]="lineChartOptions.fill!"
                              [responsive]="lineChartOptions.responsive!" [xaxis]="lineChartOptions.xaxis!"
                              [yaxis]="lineChartOptions.yaxis!" [grid]="lineChartOptions.grid!" [stroke]="lineChartOptions.stroke!"
                              [markers]="lineChartOptions.markers!">
                            </apx-chart>
                          </div>
                
                        </div>
                      </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card" style="border-radius: 31px;">
                          <div class="header mt-3">
                            <h2>Average Class Attendance</h2>
                          </div>
                          <div class="float-start ms-3 me-3">
                            <h5>129 Staff <span class="text-muted font-12">(Average)</span></h5>
                          </div>
                          <div class="body" *ngIf="isAttendanceLine">
                            <apx-chart [series]="performanceRateChartOptions.series!" [chart]="performanceRateChartOptions.chart!"
                              [xaxis]="performanceRateChartOptions.xaxis!" [stroke]="performanceRateChartOptions.stroke!"
                              [colors]="performanceRateChartOptions.colors!" [dataLabels]="performanceRateChartOptions.dataLabels!"
                              [legend]="performanceRateChartOptions.legend!" [markers]="performanceRateChartOptions.markers!"
                              [grid]="performanceRateChartOptions.grid!" [yaxis]="performanceRateChartOptions.yaxis!"
                              [tooltip]="performanceRateChartOptions.tooltip!" [title]="performanceRateChartOptions.title!">
                            </apx-chart>
                          </div>
                          <div class="body" *ngIf="isAttendancePie">
                            <apx-chart [series]="attendancePieChartOptions.series!" [chart]="attendancePieChartOptions.chart!"
                              [labels]="attendancePieChartOptions.labels!" [colors]="attendancePieChartOptions.colors!"
                              [dataLabels]="attendancePieChartOptions.dataLabels!" [legend]="attendancePieChartOptions.legend!"
                              [tooltip]="attendancePieChartOptions.tooltip!">
                            </apx-chart>
                          </div>
                          <div class="body" *ngIf="isAttendanceBar">
                            <apx-chart [series]="attendanceBarChartOptions.series!" [chart]="attendanceBarChartOptions.chart!"
                              [xaxis]="attendanceBarChartOptions.xaxis!" [stroke]="attendanceBarChartOptions.stroke!"
                              [colors]="attendanceBarChartOptions.colors!" [dataLabels]="attendanceBarChartOptions.dataLabels!"
                              [legend]="attendanceBarChartOptions.legend!" [markers]="attendanceBarChartOptions.markers!"
                              [grid]="attendanceBarChartOptions.grid!" [yaxis]="attendanceBarChartOptions.yaxis!"
                              [tooltip]="attendanceBarChartOptions.tooltip!" [title]="attendanceBarChartOptions.title!">
                            </apx-chart>
                          </div>
                        </div>
                      </div>
                </div>
                <div class="row">


                  <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                      <div class="card" style="border-radius: 31px;">
                          <div class="header mt-3">
                              <h2>Staff List</h2>

                          </div>
                          <div class="tableBody">
                              <div class="table-responsive">
                                  <table class="table table-hover">
                                      <thead>
                                          <tr>
                                              <th>#</th>
                                              <th>Staff Name</th>
                                              <th>Status</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr *ngFor="let user of staff" style="cursor: pointer;">
                                              <td class="table-img">
                                                  <img src="{{user.avatar || 'assets/profile.png'}}" alt="">
                                              </td>
                                              <td [routerLink]="[ '/admin/user-profile/view-student',user.id]">
                                                  <div class="media-title"> {{user?.name | titlecase}}
                                                  </div>
                                              </td>
                                              <td [routerLink]="['/admin/user-profile/view-student',user.id]">
                                                  <div
                                                      [class]="user?.Active ? 'badge badge-solid-green' : 'badge badge-solid-red'">
                                                      {{user?.Active == true?"Active":"Inactive"}}</div>
                                              </td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>


                  <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                      <div class="card" style="border-radius: 31px;">
                          <div class="header mt-3">
                              <h2>Feedbacks List</h2>

                          </div>
                          <div class="tableBody">
                              <div class="table-responsive">
                                  <table class="table table-hover">
                                      <thead>
                                          <tr>
                                              
                                              <th>Staff</th>
                                              <th>Course</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr *ngFor="let feedback of feedbacks" style="cursor: pointer;">
                                             
                                              <td [routerLink]="[ '/admin/user-profile/all-staff',feedback.id]">
                                                  <div class="media-title"> {{feedback?.studentFirstName | titlecase}}
                                                  </div>
                                              </td>
                                              <td [routerLink]="['/admin/user-profile/all-staff',feedback.id]">
                                                  <div>{{feedback?.courseName}}
                                                      </div>
                                              </td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>

              </div>
                <div class="row">
     
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="width: 100%;">
                      <div class="card">
                        <div class="header mt-3">
                          <h2>Upcoming Courses</h2>
                        </div>
                        <div class="body">
                          <div class="card-block" *ngFor="let data of upcomingCourses" style="cursor: pointer;" [routerLink]="['/admin/courses/all-courses']">
                            <div class="row m-b-20">
                              <div class="col-md-3">
                                <img src="{{data.image_link}}" alt="user image" class="img-fluid">
                              </div>
                              <div class="col-md-8" style="margin-left: -15px;">
                                <h6>{{data.title | titlecase |truncate : 25}}</h6>
                                <div class="row">
                                  <div class="col-md-2">
                                    <b>{{ data?.courseCode }}</b>
                                  </div>
                                  <div class="col-md-2">
                                    <b>{{ data.training_hours}} Hours</b>
                                  </div>
                                  <div class="col-md-2">
                                    <b>{{data.course_duration_in_days}}</b>
                                  </div>
                                  <!-- <div class="col-md-3" [class]="data?.Active ? 'badge badge-solid-red' : 'badge badge-solid-green'">
                                    <b>{{ data?.classDeliveryType | titlecase }}</b>
                                  </div> -->
                                  <div class="col-md-3">
                                    <b style="color: blue;"><i class="fa fa-play-circle-o"></i> {{data.sessionStartDate | date}}</b>
                                  </div>
                                </div>
              
                               
                              </div>
                            </div>
                          </div>
                          <div class="text-center">
                            <button mat-stroked-button [routerLink]="['/admin/courses/all-courses/course']" color="primary">View More</button>
                          </div>
                        </div>
                      </div>
                    </div>
                    </div>
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="card" style="border-radius: 31px;">
                          <div class="header mt-3">
                            <h2>Classes List</h2>
                
                          </div>
                          <div class="tableBody">
                            <div class="table-responsive">
                              <table class="table table-hover ">
                                <thead>
                                  <tr>
                                    <!-- <th>#</th> -->
                                    <th>Course Name</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Status </th>
                                    <!-- <th>Actions </th> -->
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr *ngFor="let class of classesList " style="cursor: pointer;"
                                    [routerLink]="['/admin/courses/view-class/',class.id]">
                                    <!-- <td class="table-img">
                                <img src="{{class?.courseId?.image_link}}" alt="course">
                              </td> -->
                                    <td>{{class?.courseId?.title | titlecase | truncate:10}}</td>
                                    <td> {{class?.sessions[0]?.sessionStartDate | date}} </td>
                                    <td> {{class?.sessions[0]?.sessionEndDate | date}}</td>
                                    <td>
                                      <div class="badge col-green">{{class?.status == 'open'?'Active':'Inactive'}}</div>
                                    </td>
                
                                  </tr>
                
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>
                </div>


            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                  <!-- <mat-icon class="example-tab-icon msr-2">face</mat-icon> -->
                  Support
                </ng-template>
                <app-support></app-support>
              </mat-tab>
        </mat-tab-group>

    </div>
</section>