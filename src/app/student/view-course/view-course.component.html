<section class="content">
  <div class="content-block">
    <!-- <div class="block-header" *ngFor="let breadscrum of breadscrums">
      <app-breadcrumb
        [title]="breadscrum.title"
        [items]="breadscrum.items"
        [active_item]="breadscrum.active"
      >
      </app-breadcrumb>
    </div> -->
    <!-- Your content goes here  -->
    <!--  -->
    <div class="row clearfix mt-5">
      <div class="col-lg-4 col-md-3" *ngIf="!isCompleted && !isApproved">
        <div class="card">
          <div class="m-b-20">
            <div class="contact-grid">
              <div class="profile-header bg-dark">
                <div class="user-name">{{ classDetails?.courseId?.title }}</div>
                <div class="name-center">
                  {{ classDetails?.courseId?.courseCode }}
                </div>
              </div>
              <img
                src="{{ classDetails?.courseId?.image_link }}"
                class="user-img"
                alt=""
              />
              <p
                [innerHTML]="
                  classDetails?.courseId?.course_description | bulletPoints
                "
              ></p>

              <div class="row">
                <div class="col-3">
                  <span class="day_font">{{
                    classDetails?.courseId?.course_duration_in_days
                  }}</span>
                  <span class="dis_font">Days</span>
                </div>
                <div class="col-4">
                  <span class="day_font">{{
                    classDetails?.courseId?.training_hours
                  }}</span>
                  <span class="dis_font">Hours</span>
                </div>
                <div class="col-5">
                  <span class="day_font"
                    >{{ classDetails?.courseId?.fee }}$</span
                  >
                  <span class="dis_font">Fee</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <mat-tab-group mat-align-tabs="start">
            <mat-tab label="About">
              <div class="p-4">
                <label
                  *ngIf="classDetails?.courseId?.course_detailed_description"
                  class="font-bold"
                  >Description:</label
                >
                <p
                  class="text-default"
                  [innerHTML]="
                    classDetails?.courseId?.course_detailed_description
                      | bulletPoints
                  "
                ></p>

                <ul class="list-group list-group-unbordered">
                  <li class="list-group-item">
                    <b>Delivery </b>
                    <div class="profile-desc-item float-end">
                      {{ classDetails?.classDeliveryType | titlecase }}
                    </div>
                  </li>
                  <li class="list-group-item">
                    <b>Course Created </b>
                    <div class="profile-desc-item float-end">
                      {{ classDetails?.createdAt | date }}
                    </div>
                  </li>
                  <li class="list-group-item">
                    <b>Course Run </b>
                    <div class="profile-desc-item float-end">
                      {{
                        classDetails?.isGuaranteedToRun == true ? "Yes" : "No"
                      }}
                    </div>
                  </li>
                </ul>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>

      <!-- video content -->
      <div *ngIf="isApproved || isCompleted" class="col-lg-12 col-md-8">
        <div class="row">
          <div class="col-lg-9 col-md-9">
            <div>
              <div class="video-container" (click)="toggleVideoPlay()">
                <video
                  #videoPlayer
                  width="100%"
                  (timeupdate)="onTimeUpdate($event)"
                  controls
                  (pause)="destroyModal()"
                  (play)="onPlay()"
                  style="border-radius: 12px; box-shadow: rgb(23, 23, 24)"
                >
                  Your browser does not support the video tag.
                </video>
                <div *ngIf="!isPlaying" class="play-button"></div>
              </div>
              <!-- <h5 class="text">Course Completed : <span [ngClass]="{'red-text': playBackTime< 50, 'green-text': playBackTime>= 50}">{{playBackTime.toFixed(2) || 0}}%</span></h5> -->
              <div class="">
                <h4 c>{{ header }}</h4>
                <p>{{ sdiscrption }}</p>
              </div>
            </div>

            <div class="card" *ngIf="isApproved || isCompleted">
              <div class="card-header">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link active"
                      id="home-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#home"
                      type="button"
                      role="tab"
                      aria-controls="home"
                      aria-selected="true"
                    >
                      <!-- <i class="now-ui-icons shopping_shop"></i> -->
                      Course Details
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="des-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#des"
                      type="button"
                      role="tab"
                      aria-controls="des"
                      aria-selected="false"
                    >
                      <!-- <i class="now-ui-icons ui-2_settings-90"></i> -->
                      Description
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="profile-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#profile"
                      type="button"
                      role="tab"
                      aria-controls="profile"
                      aria-selected="false"
                    >
                      <!-- <i class="now-ui-icons ui-2_settings-90"></i> -->
                      Classes
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="test-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#test"
                      type="button"
                      role="tab"
                      aria-controls="test"
                      aria-selected="false"
                    >
                      <!-- <i class="now-ui-icons ui-2_settings-90"></i> -->
                      Test
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="feedback-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#feedback"
                      type="button"
                      role="tab"
                      aria-controls="feedback"
                      aria-selected="false"
                    >
                      <!-- <i class="now-ui-icons ui-2_settings-90"></i> -->
                      Feedback
                    </button>
                  </li>
                  <li class="nav-item" role="presentation" *ngIf="isCompleted">
                    <button
                      class="nav-link"
                      id="contact-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#contact"
                      type="button"
                      role="tab"
                      aria-controls="contact"
                      aria-selected="false"
                    >
                      <!-- <i class="now-ui-icons ui-2_settings-90"></i>  -->
                      Certificate
                    </button>
                  </li>
                </ul>
              </div>
              <!-- Course Completed  -->
              <div class="card-body">
                <div class="tab-content" id="myTabContent">
                  <div
                    class="tab-pane fade show active"
                    id="home"
                    role="tabpanel"
                    aria-labelledby="home-tab"
                  >
                    <span class="font-bold">Course Description:</span>
                    <p
                      [innerHTML]="
                        classDetails?.courseId?.course_description
                          | bulletPoints
                      "
                    ></p>
                    <div class="row p-2 bg-light" style="border-radius: 5px">
                      <div class="col-6">
                        <span class="font-bold"
                          >Title:
                          <p class="font-">
                            {{ classDetails?.courseId?.title }}
                          </p></span
                        >
                        <span class="font-bold"
                          >Course Code:
                          <p>{{ classDetails?.courseId?.courseCode }}</p></span
                        >
                      </div>
                      <div class="col-6">
                        <label class="font-bold">About</label>
                        <div
                          class="d-flex justify-content-between shadow-lg rounded-3 p-2"
                        >
                          <div>
                            <span class="day_font">{{
                              classDetails?.courseId?.course_duration_in_days
                            }}</span>
                            <span class="dis_font">Days</span>
                          </div>
                          <div>
                            <span class="day_font">{{
                              classDetails?.courseId?.training_hours
                            }}</span>
                            <span class="dis_font">Hours</span>
                          </div>
                          <div>
                            <span class="day_font"
                              >{{ classDetails?.courseId?.fee }}$</span
                            >
                            <span class="dis_font">Fee</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <ul class="m-2 list-group-unbordered">
                      <li class="list-group-item">
                        <b>Delivery </b>
                        <div class="profile-desc-item float-end">
                          {{ classDetails?.classDeliveryType | titlecase }}
                        </div>
                      </li>
                      <li class="list-group-item">
                        <b>Course Created </b>
                        <div class="profile-desc-item float-end">
                          {{ classDetails?.createdAt | date }}
                        </div>
                      </li>
                      <li class="list-group-item">
                        <b>Course Run </b>
                        <div class="profile-desc-item float-end">
                          {{
                            classDetails?.isGuaranteedToRun == true
                              ? "Yes"
                              : "No"
                          }}
                        </div>
                      </li>
                    </ul>

                    <h5 class="bg-light p-2">
                      Course Completed :
                      <span
                        [ngClass]="{
                          'red-text': playBackTime < 50,
                          'green-text': playBackTime >= 50
                        }"
                        >{{ playBackTime.toFixed(2) || 0 }}%</span
                      >
                    </h5>
                  </div>
                  <div
                    class="tab-pane fade"
                    id="des"
                    role="tabpanel"
                    aria-labelledby="des-tab"
                  >
                    <!-- <h5 class="text">Course Completed : <span [ngClass]="{'red-text': playBackTime< 50, 'green-text': playBackTime>= 50}">{{playBackTime.toFixed(2) || 0}}%</span></h5> -->
                    {{ longDescription }}
                  </div>

                  <div
                    class="tab-pane fade"
                    id="profile"
                    role="tabpanel"
                    aria-labelledby="profile-tab"
                  >
                    <table mat-table [dataSource]="dataSource">
                      <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef>Instructor</th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.instructorId?.name }}
                          {{
                            element?.instructorId?.last_name
                              ? element?.instructorId?.last_name
                              : ""
                          }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef=" Class Start Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class Start Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionStartDate | date }}
                        </td>
                      </ng-container>
                      <ng-container matColumnDef=" Class End Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class End Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionEndDate | date }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef>Action</th>
                        <td mat-cell *matCellDef="let element">
                          <button
                            *ngIf="
                              !isRegistered &&
                              !isStatus &&
                              !isApproved &&
                              !isCancelled &&
                              !isCompleted
                            "
                            class="btn btn-primary"
                            (click)="registerClass(element._id)"
                          >
                            Register
                          </button>

                          <span
                            class="badge badge-solid-orange mx-2"
                            *ngIf="isRegistered || isStatus"
                            >Registered</span
                          >
                          <span
                            class="badge badge-solid-green mx-2"
                            *ngIf="isApproved"
                            >Approved</span
                          >
                          <span
                            class="badge badge-solid-red mx-2"
                            *ngIf="isCancelled"
                            >Cancelled</span
                          >
                          <span
                            class="badge badge-solid-green mx-2"
                            *ngIf="isCompleted"
                            >Completed</span
                          >
                        </td>
                      </ng-container>

                      <tr
                        mat-header-row
                        *matHeaderRowDef="displayedColumns"
                      ></tr>
                      <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns"
                      ></tr>
                    </table>
                  </div>
                  <div
                    class="tab-pane fade"
                    id="contact"
                    role="tabpanel"
                    aria-labelledby="contact-tab"
                  >
                    <table mat-table [dataSource]="dataSource">
                      <!--- Note that these columns can be defined in any order.
                                        The actual rendered columns are set as a property on the row definition" -->

                      <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef>Instructor</th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.instructorId?.name }}
                          {{
                            element?.instructorId?.last_name
                              ? element?.instructorId?.last_name
                              : ""
                          }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef=" Class Start Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class Start Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionStartDate | date }}
                        </td>
                      </ng-container>
                      <ng-container matColumnDef=" Class End Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class End Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionEndDate | date }}
                        </td>
                      </ng-container>
                      <!-- <ng-container matColumnDef="action">
                              <th mat-header-cell *matHeaderCellDef> Completed </th>
                              <td mat-cell *matCellDef="let element">
                                <a href="{{studentClassDetails?.certifiacteUrl}}" target="_blank"><mat-icon>download</mat-icon></a>
                              </td>
                            </ng-container> -->
                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef>
                          Download Certificate
                        </th>
                        <div *ngIf="!certificateIssued">
                          <td mat-cell *matCellDef="let element">
                            <span class="badge badge-solid-green">
                              Certificate will be available</span
                            >
                          </td>
                        </div>

                        <div *ngIf="certificateIssued">
                          <td mat-cell *matCellDef="let element">
                            <a
                              href="{{ studentClassDetails?.certifiacteUrl }}"
                              target="_blank"
                            >
                              <mat-icon>download</mat-icon></a
                            >
                          </td>
                        </div>
                      </ng-container>
                      <tr
                        mat-header-row
                        *matHeaderRowDef="displayedColumns"
                      ></tr>
                      <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns"
                      ></tr>
                    </table>
                  </div>
                  <div
                    class="tab-pane fade"
                    id="test"
                    role="tabpanel"
                    aria-labelledby="test"
                  >
                    <app-questions
                      *ngIf="questionList.length"
                      [questionList]="questionList"
                      [answersResult]="answersResult"
                      [totalTime]="questionList.length * 60"
                      (submitAnswers)="submitAnswers($event)"
                      [isAnswersSubmitted]="isAnswersSubmitted"
                    ></app-questions>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- CourseKit -->
          <div class="col-lg-3" *ngIf="isApproved || isCompleted">
            <div class="card">
              <table mat-table [dataSource]="coursekitDetails">
                <!-- Column Definitions -->
                <ng-container matColumnDef="video">
                  <th mat-header-cell *matHeaderCellDef>
                    <span class="kit">Course Kit</span>
                  </th>
                  <td mat-cell *matCellDef="let row; let i = index">
                    <div
                      class="pointer"
                      (click)="
                        playVideos({
                          name: row.name,
                          discription: row.shortDescription,
                          id: row.videoId,
                          playbackTime: row.playbackTime
                        })
                      "
                    >
                      <span class="font-bold top"
                        >Section:{{ i + 1 }} &nbsp;&nbsp;{{ row.name }}
                      </span>
                      <div class="d-flex">
                        <span class="d-flex align-items-start"
                          ><i class="material-icons icon" color="warn"
                            >ondemand_video</i
                          > </span
                        >&nbsp;<span
                          class="duration"
                          [ngClass]="{
                            'red-text': row.playbackTime < 50,
                            'green-text': row.playbackTime >= 50
                          }"
                          >{{ row.playbackTime | number : "1.2-2" }}%</span
                        >
                      </div>
                      <!-- <span [ngClass]="{'red-text': playBackTime< 50, 'green-text': playBackTime>= 50}">{{playBackTime.toFixed(2) || 0}}% -->
                      <div class="">
                        <span class="d-flex align-items-start"
                          ><i class="material-icons icon">article</i>&nbsp;
                          <a
                            href="{{ row.documentLink }}"
                            href=""
                            class="m-b-20 text-black"
                            target="_blank"
                          >
                            <span class="duration">{{
                              row.filename | truncate : 20
                            }}</span></a
                          >
                        </span>
                      </div>
                    </div>
                  </td>
                </ng-container>

                <!-- Header and Rows -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns1"
                ></tr>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- video end -->

      <div class="col-lg-8 col-md-8" *ngIf="!isCompleted && !isApproved">
        <div class="card">
          <mat-tab-group>
            <mat-tab>
              <ng-template mat-tab-label>
                <!-- <mat-icon class="example-tab-icon msr-2">face</mat-icon> -->
                Classes
              </ng-template>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="project_widget">
                  <div class="body">
                    <table mat-table [dataSource]="dataSource">
                      <!--- Note that these columns can be defined in any order.
                                  The actual rendered columns are set as a property on the row definition" -->

                      <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef>Instructor</th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.instructorId?.name }}
                          {{
                            element?.instructorId?.last_name
                              ? element?.instructorId?.last_name
                              : ""
                          }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef=" Class Start Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class Start Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionStartDate | date }}
                        </td>
                      </ng-container>
                      <ng-container matColumnDef=" Class End Date ">
                        <th mat-header-cell *matHeaderCellDef>
                          Class End Date
                        </th>
                        <td mat-cell *matCellDef="let element">
                          {{ element?.sessionEndDate | date }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef>Action</th>
                        <td mat-cell *matCellDef="let element">
                          <button
                            *ngIf="
                              !isRegistered &&
                              !isStatus &&
                              !isApproved &&
                              !isCancelled &&
                              !isCompleted
                            "
                            class="btn btn-primary"
                            (click)="registerClass(element._id)"
                          >
                            Register
                          </button>

                          <span
                            class="badge badge-solid-orange mx-2"
                            *ngIf="isRegistered || isStatus"
                            >Registered</span
                          >
                          <span
                            class="badge badge-solid-green mx-2"
                            *ngIf="isApproved"
                            >Approved</span
                          >
                          <span
                            class="badge badge-solid-red mx-2"
                            *ngIf="isCancelled"
                            >Cancelled</span
                          >
                          <span
                            class="badge badge-solid-green mx-2"
                            *ngIf="isCompleted"
                            >Completed</span
                          >
                        </td>
                      </ng-container>

                      <tr
                        mat-header-row
                        *matHeaderRowDef="displayedColumns"
                      ></tr>
                      <tr
                        mat-row
                        *matRowDef="let row; columns: displayedColumns"
                      ></tr>
                    </table>

                    <p
                      class="m-t-30"
                      [innerHTML]="
                        classDetails?.courseId?.course_detailed_description
                          | bulletPoints
                      "
                    >
                      <br />
                    </p>
                  </div>
                </div>
              </div>
              <div class="p-4">
                <ul class="list-group list-group-unbordered">
                  <li class="list-group-item">
                    <b>Skill Connect Code </b>
                    <div class="profile-desc-item float-end">
                      {{ classDetails?.courseId?.skill_connect_code }}
                    </div>
                  </li>
                  <li class="list-group-item">
                    <b>Minimum Enrollment </b>
                    <div class="profile-desc-item float-end">
                      {{ classDetails?.minimumEnrollment }}
                    </div>
                  </li>
                  <li class="list-group-item">
                    <b>Maximum Enrollment </b>
                    <div class="profile-desc-item float-end">
                      {{ classDetails?.maximumEnrollment }}
                    </div>
                  </li>
                  <!-- <li class="list-group-item">
                          <b>Designation</b>
                          <div class="profile-desc-item float-end">Sr. Teacher</div>
                        </li> -->
                </ul>
                <!-- <button class="btn btn-primary m-2" (click)="feedback()" style="float: right;">
                            Feedback
                          </button> -->
              </div>
              <!-- <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="header">
                      <h2><strong>Education</strong></h2>
                    </div>
                    <div class="body">
                      <ul>
                        <li>B.A.,Gujarat University, Ahmedabad,India.</li>
                        <li>M.A.,Gujarat University, Ahmedabad, India.</li>
                        <li>P.H.D., Shaurashtra University, Rajkot</li>
                      </ul>
                    </div>
                  </div>
                </div> -->
              <!-- <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="header">
                      <h2><strong>Experience</strong></h2>
                    </div>
                    <div class="body">
                      <ul>
                        <li>One year experience as Jr. Teacher from April-2009 to
                          march-2010 at B. J. Arts College, Ahmedabad.</li>
                        <li>Three year experience as Jr. Teacher at V.S. Arts &
                          Commerse Collage from April - 2008 to April -
                          2011.</li>
                        <li>Lorem Ipsum is simply dummy text of the printing and
                          typesetting industry. </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and
                          typesetting industry. </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and
                          typesetting industry. </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and
                          typesetting industry. </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="project_widget">
                    <div class="header">
                      <h2><strong>Conferences, Cources &amp; Workshop Attended</strong></h2>
                    </div>
                    <div class="body">
                      <ul>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                        <li>Lorem Ipsum is simply dummy text of the printing and typesetting
                          industry.
                        </li>
                      </ul>
                    </div>
                  </div>
                </div> -->
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
  </div>
</section>
